# Knotly 유비쿼터스 언어 (Ubiquitous Language)

> 모든 Bounded Context에서 사용하는 공통 용어집

## 📚 개요

유비쿼터스 언어는 **개발자, 기획자, 사용자**가 모두 동일한 용어를 사용하여 의사소통하기 위한 공통 언어입니다.
모든 코드, 문서, 대화에서 이 용어를 일관되게 사용해야 합니다.

---

## 🎨 Core Domain: Canvas & Graph

### 핵심 개념

| 한글 | 영문 | 정의 | 예시 |
|------|------|------|------|
| **노드** | Node | 손그림 도형 안에 손글씨 텍스트가 들어간 단위. 캔버스에 자유롭게 배치 가능 | "새 노드를 생성하세요" |
| **엣지** | Edge | 두 노드를 연결하는 선. 점선/실선/화살표 등 5가지 스타일 | "노드 간 엣지를 그리세요" |
| **캔버스** | Canvas | 노드들이 배치되는 무한 그리드 공간. 줌/팬 가능 | "캔버스를 확대하세요" |
| **그리드** | Grid | 캔버스 배경의 모눈종이 격자 (20px 간격) | "그리드를 토글하세요" |
| **연결** | Connection | 노드 간의 관계. Edge로 표현됨 | "두 노드를 연결하세요" |
| **멘션** | Mention | @기호로 다른 노드 참조. 자동으로 Edge 생성 | "@노트1을 입력하면 자동 연결" |

---

### 노드 관련 용어

| 한글 | 영문 | 정의 |
|------|------|------|
| **도형 타입** | Shape Type | 노드의 시각적 형태 (동그라미, 네모, 구름 등 12가지) |
| **위치** | Position | 노드의 (x, y) 좌표 |
| **내용** | Content | 노드 안의 손글씨 텍스트 (최대 1000자) |
| **스타일** | Style | 노드의 배경색, 테두리색, 굵기 등 시각적 속성 |
| **이모지** | Emoji | 노드에 추가할 수 있는 이모지 (선택사항) |

**용례**:
- ✅ "노드의 위치를 변경하세요"
- ✅ "노드 내용을 수정하세요"
- ❌ "박스를 옮기세요" (노드라고 해야 함)

---

### 엣지 관련 용어

| 한글 | 영문 | 정의 |
|------|------|------|
| **출발 노드** | From Node | 엣지가 시작하는 노드 |
| **도착 노드** | To Node | 엣지가 끝나는 노드 |
| **선 스타일** | Line Style | 점선, 실선, 곡선, 화살표, 양방향 화살표 (5가지) |
| **양방향 연결** | Bidirectional | 두 노드를 양쪽에서 연결 (역방향 엣지 생성) |

**용례**:
- ✅ "출발 노드에서 도착 노드로 엣지를 생성하세요"
- ✅ "선 스타일을 화살표로 변경하세요"
- ❌ "선을 그으세요" (엣지를 생성한다고 해야 함)

---

### 캔버스 관련 용어

| 한글 | 영문 | 정의 |
|------|------|------|
| **줌** | Zoom | 캔버스 확대/축소 (핀치 제스처 또는 휠) |
| **팬** | Pan | 캔버스 이동 (투 핑거 드래그 또는 Space+드래그) |
| **뷰포트** | Viewport | 화면에 보이는 캔버스 영역 |
| **스냅** | Snap | 노드를 그리드에 맞춰 정렬 (20px 단위) |

**용례**:
- ✅ "캔버스를 줌인하세요"
- ✅ "노드를 드래그하면 그리드에 스냅됩니다"

---

## 🔍 Supporting Domain: Search

| 한글 | 영문 | 정의 |
|------|------|------|
| **검색 쿼리** | Search Query | 사용자가 입력한 검색어 |
| **퍼지 매칭** | Fuzzy Matching | 오타가 있어도 유사한 결과 찾기 (Fuse.js) |
| **검색 결과** | Search Result | 쿼리에 매치된 노드 목록 |
| **하이라이트** | Highlight | 검색어가 포함된 부분을 강조 표시 |
| **필터** | Filter | 도형 타입, 색상, 날짜로 검색 범위 제한 |

**용례**:
- ✅ "퍼지 매칭으로 검색하세요"
- ✅ "도형 타입 필터를 적용하세요"

---

## 💾 Supporting Domain: Persistence

| 한글 | 영문 | 정의 |
|------|------|------|
| **자동 저장** | Auto Save | 500ms 디바운싱 후 자동으로 IndexedDB에 저장 |
| **디바운싱** | Debouncing | 연속된 변경을 일정 시간 대기 후 한 번만 처리 |
| **로컬 캐시** | Local Cache | 브라우저의 IndexedDB에 저장된 데이터 |
| **동기화** | Sync | 로컬 데이터를 서버와 맞추기 (Phase 2) |
| **충돌** | Conflict | 동시 편집 시 데이터 불일치 (Phase 2) |

**용례**:
- ✅ "변경사항은 자동 저장됩니다"
- ✅ "오프라인 모드에서는 로컬 캐시를 사용합니다"

---

## 📦 Generic Domain: Export

| 한글 | 영문 | 정의 |
|------|------|------|
| **내보내기** | Export | 현재 워크스페이스를 JSON 파일로 다운로드 |
| **가져오기** | Import | JSON 파일을 업로드하여 복원 |
| **백업** | Backup | 데이터의 복사본 생성 |
| **복원** | Restore | 백업에서 데이터를 되돌리기 |

---

## 👥 Phase 2: Collaboration Domain

| 한글 | 영문 | 정의 |
|------|------|------|
| **워크스페이스** | Workspace | 여러 노드/엣지의 집합. 사용자가 작업하는 공간 |
| **사용자** | User | 계정을 가진 개인 |
| **소유자** | Owner | 워크스페이스를 생성한 사용자 (모든 권한) |
| **편집자** | Editor | 노드/엣지 생성/편집/삭제 가능 |
| **뷰어** | Viewer | 읽기만 가능 |
| **커서** | Cursor | 실시간 협업 시 다른 사용자의 마우스 위치 |
| **실시간 동기화** | Real-time Sync | WebSocket으로 변경사항 즉시 전파 |

**용례**:
- ✅ "워크스페이스를 공유하세요"
- ✅ "편집자 권한을 부여하세요"

---

## 🎯 Action Verbs (동작 동사)

### 노드 관련

| 한글 | 영문 | 정의 |
|------|------|------|
| **생성하다** | Create | 새 노드를 캔버스에 추가 |
| **편집하다** | Edit | 노드 내용 수정 |
| **이동하다** | Move | 노드 위치 변경 (드래그) |
| **삭제하다** | Delete | 노드 제거 (CASCADE로 엣지도 삭제) |
| **복제하다** | Duplicate | 동일한 노드 복사본 생성 |
| **선택하다** | Select | 노드를 활성화 상태로 만들기 |

### 엣지 관련

| 한글 | 영문 | 정의 |
|------|------|------|
| **연결하다** | Connect | 두 노드 사이에 엣지 생성 |
| **끊다** | Disconnect | 엣지 삭제 |
| **스타일 변경** | Change Style | 점선 → 실선 등 |

### 캔버스 관련

| 한글 | 영문 | 정의 |
|------|------|------|
| **확대하다** | Zoom In | 캔버스 크게 보기 |
| **축소하다** | Zoom Out | 캔버스 작게 보기 |
| **이동하다** | Pan | 캔버스 위치 이동 |
| **스냅하다** | Snap | 그리드에 정렬 |

---

## 🚫 피해야 할 용어

| ❌ 사용 금지 | ✅ 올바른 용어 | 이유 |
|-------------|--------------|------|
| "박스", "사각형" | 노드 | 노드가 공식 용어 |
| "선", "라인" | 엣지 | 엣지가 도메인 용어 |
| "화면" | 캔버스 | 캔버스가 정확한 개념 |
| "저장하기 버튼" | 자동 저장 | 사용자 액션 불필요 |
| "링크" | 연결, 엣지 | 혼동 방지 |

---

## 📝 코드 예시

### ✅ 올바른 코드

```typescript
// 유비쿼터스 언어 사용
class Node {
  moveTo(position: Position): void {
    this.position = position;
    this.recordEvent(new NodeMoved(this.id, position));
  }
}

// API 엔드포인트
POST /nodes         // 노드 생성
PUT /nodes/:id/move // 노드 이동
POST /edges         // 엣지 생성
```

### ❌ 잘못된 코드

```typescript
// 일반적인 용어 사용 (피해야 함)
class Box {
  changeLocation(coords: Coords): void {
    this.coords = coords;
  }
}

// API 엔드포인트
POST /items         // 애매함
PUT /items/:id      // 의미 불명확
POST /connections   // Edge라고 해야 함
```

---

## 🔄 용어 변경 이력

| 날짜 | 이전 용어 | 새 용어 | 이유 |
|------|----------|---------|------|
| 2025-01-17 | "박스" | "노드" | 도메인 개념 명확화 |
| 2025-01-17 | "연결선" | "엣지" | 그래프 이론 표준 용어 |

---

## ✅ 용어 일관성 체크리스트

프로젝트에서 용어 일관성을 유지하기 위한 체크리스트:

- [ ] 코드 변수명이 유비쿼터스 언어 사용
- [ ] API 엔드포인트가 도메인 용어 사용
- [ ] UI 텍스트가 한글 용어 일관성 유지
- [ ] 문서(README, 사양서)가 동일 용어 사용
- [ ] 커밋 메시지가 도메인 용어 사용
- [ ] 테스트 코드가 비즈니스 언어로 작성

---

**작성일**: 2025-10-17
**마지막 업데이트**: 2025-10-17
