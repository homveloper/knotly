기술 스택: React 18을 프론트엔드 프레임워크로 사용한다. Vite를 빌드 도구로 채택하여 빠른 개발 서버와 HMR을 제공한다. TypeScript로 타입 안전성을 확보하며 strict mode를 활성화한다. Tailwind CSS를 스타일링 도구로 사용하여 유틸리티 우선 CSS를 적용한다. rough.js 라이브러리(^4.6.6)를 npm으로 설치하여 손그림 도형을 렌더링한다. 나눔손글씨 펜 폰트는 Google Fonts API를 통해 웹폰트로 로딩한다. SVG를 주 렌더링 방식으로 사용하여 벡터 기반의 선명한 출력을 보장한다.

아키텍처 개요: 단일 React 컴포넌트(Canvas.tsx)를 만들고, 그 안에 SVG 요소를 렌더링한다. rough.js의 RoughSVG를 사용하여 동그라미 path를 생성한다. SVG text 요소에 나눔손글씨 펜 폰트를 적용하여 텍스트를 렌더링한다. 컴포넌트 구조는 App.tsx가 Canvas.tsx를 포함하는 단순한 형태이다. 상태 관리는 필요 없으므로 useState도 사용하지 않는다. 모든 데이터는 컴포넌트 내부에 하드코딩한다.

React + Vite + TypeScript 프로젝트를 초기화한다. pnpm create vite knotly-frontend --template react-ts를 실행한다. 프로젝트 폴더로 이동하여 pnpm install을 실행한다. rough.js를 설치한다. pnpm add roughjs와 pnpm add -D @types/roughjs를 실행한다. tsconfig.json을 열어 compilerOptions에 "strict": true를 추가하여 TypeScript strict mode를 활성화한다. 이는 Constitution 원칙 V에 따른 필수 설정이다. 개발 서버를 실행하여 기본 화면을 확인한다. pnpm dev를 실행하고 http://localhost:5173에 접속한다.

Tailwind CSS를 설치하고 설정한다. pnpm add -D tailwindcss postcss autoprefixer를 실행하여 Tailwind와 필요한 도구들을 설치한다. npx tailwindcss init -p를 실행하여 tailwind.config.js와 postcss.config.js를 생성한다. tailwind.config.js의 content 배열을 수정한다. content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"]로 설정하여 모든 템플릿 파일을 스캔하도록 한다. src/index.css 파일을 열어 기존 내용을 제거하고 Tailwind directives를 추가한다. @tailwind base; @tailwind components; @tailwind utilities;를 추가한다. 개발 서버를 재시작하여 Tailwind가 정상 작동하는지 확인한다.

Google Fonts에서 나눔손글씨 펜을 로딩하도록 index.html의 head 태그에 추가한다. preconnect link를 먼저 추가하여 폰트 로딩을 빠르게 한다. link rel="preconnect" href="https://fonts.googleapis.com"과 link rel="preconnect" href="https://fonts.gstatic.com" crossorigin을 추가한다. 그 다음 폰트 스타일시트를 로딩한다. link href="https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&display=swap" rel="stylesheet"를 추가한다. display=swap을 사용하여 FOUT를 방지한다.

src/components/Canvas.tsx 파일을 생성한다. React와 rough.js를 import한다. import rough from 'roughjs'를 추가한다. useRef로 SVG 요소의 참조를 가져온다. useEffect에서 SVG ref가 null인지 먼저 확인한다. if (!svgRef.current) return을 추가하여 null 체크를 수행한다. 이는 Constitution 원칙 I에 따른 에러 핸들링이다. rough.svg를 호출하여 RoughSVG 인스턴스를 생성한다. const rc = rough.svg(svgRef.current)를 실행한다. rc.circle 메서드를 호출하여 동그라미 path를 생성한다. const node = rc.circle(400, 300, 150, {roughness: 1.2, fill: '#FFE082', stroke: '#000', strokeWidth: 2})를 실행한다. 생성된 path를 svgRef.current.appendChild(node)로 추가한다.

SVG text 요소를 추가하여 텍스트를 렌더링한다. Canvas.tsx의 return 문에 SVG 태그를 작성한다. svg 태그의 width와 height를 800, 600으로 설정한다. ref={svgRef}를 추가하여 useRef와 연결한다. rect 태그로 캔버스 배경색을 설정한다. rect x="0" y="0" width="800" height="600" fill="#fafafa"를 추가한다. text 태그로 텍스트를 렌더링한다. text x="400" y="305" textAnchor="middle" fontFamily="'Nanum Pen Script', cursive" fontSize="18" fill="#333"을 추가하고, 텍스트 내용은 "손글씨 노트 프로토타입"으로 설정한다.

App.tsx를 수정하여 Canvas 컴포넌트를 렌더링한다. 기본 Vite 템플릿 코드를 제거하고 Canvas만 렌더링한다. import Canvas from './components/Canvas'를 추가한다. return 문에 Tailwind CSS 유틸리티 클래스를 사용하여 레이아웃을 구성한다. div className="flex justify-center items-center h-screen bg-gray-50"를 추가하여 중앙 정렬과 배경색을 설정한다. 그 안에 Canvas 컴포넌트를 넣는다. index.css의 기존 CSS는 Tailwind directives만 남기고 모두 제거한다.

렌더링 성능을 확인하여 Constitution 원칙 VIII을 준수한다. 브라우저 개발자 도구를 열고 Performance 탭에서 프로파일링을 시작한다. 페이지를 새로고침하고 렌더링이 완료될 때까지 기록한다. FPS가 60을 유지하는지 확인한다. 이는 Constitution에서 요구하는 필수 성능 기준이다. rough.js의 계산이 메인 스레드를 블로킹하지 않는지 확인한다. Memory 탭에서 힙 스냅샷을 찍어 메모리 사용량이 50MB 이내인지 검증한다. 모바일 환경을 시뮬레이션하기 위해 DevTools에서 CPU 4x slowdown을 적용하고 다시 측정한다. 폰트 로딩 시간을 Network 탭에서 확인하여 500ms 이내인지 검증한다. Lighthouse를 실행하여 First Contentful Paint가 1초 이내, Performance 점수가 90 이상인지 확인한다.

기술적 제약사항: rough.js의 roughness 파라미터는 1.2를 초과하지 않는다. 너무 높으면 도형이 지저분해 보인다. SVG는 viewport 크기에 맞춰 반응형으로 조정하지 않는다. 이 단계에서는 고정 크기(800x600)만 사용한다. 폰트 로딩 실패 시 cursive 제네릭 폰트로 대체되도록 fontFamily에 fallback을 명시한다. fontFamily="'Nanum Pen Script', cursive"처럼 작성한다. useEffect의 dependency array를 빈 배열로 설정하여 마운트 시 1회만 실행되도록 한다. TypeScript strict mode가 활성화되어 있으므로 모든 타입을 명시적으로 선언해야 한다. SVGSVGElement와 같은 타입을 useRef에 명시한다. Constitution 원칙에 따라 throw를 사용하지 않는다. 에러 발생 시 early return이나 옵셔널 체이닝을 사용하여 처리한다.

참고 자료: rough.js 공식 문서 https://github.com/rough-stuff/rough에서 API 사용법을 확인한다. circle 메서드의 매개변수는 x, y, diameter, options 순서이다. Google Fonts API 문서 https://developers.google.com/fonts에서 나눔손글씨 펜의 정확한 family name을 확인한다. "Nanum Pen Script"이다. Tailwind CSS 공식 문서 https://tailwindcss.com/docs/installation/framework-guides#vite에서 Vite 설치 가이드를 참고한다. 유틸리티 클래스는 https://tailwindcss.com/docs/utility-first에서 확인한다. React useRef와 useEffect 사용법은 React 공식 문서 https://react.dev/reference/react/useRef를 참고한다. SVG text 요소의 속성은 MDN 문서 https://developer.mozilla.org/en-US/docs/Web/SVG/Element/text를 참고한다. textAnchor="middle"을 사용하면 x 좌표를 중심으로 텍스트가 중앙 정렬된다. TypeScript strict mode 관련 타입 에러는 TypeScript 핸드북 https://www.typescriptlang.org/docs/handbook/2/narrowing.html에서 해결 방법을 찾는다.
