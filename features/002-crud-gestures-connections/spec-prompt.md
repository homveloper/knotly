목표: 노드 생성, 편집, 이동, 삭제 기능과 모바일 터치 제스처, 점선 연결, 그리고 @멘션 자동 연결을 구현하여 기본 그래프 편집 환경을 완성한다. 사용자가 모바일에서 FAB 버튼으로 노드를 추가하고, 드래그로 배치하며, 점선으로 연결하여 간단한 마인드맵을 작성할 수 있도록 한다.

핵심 기능: 노드 CRUD. FAB 버튼을 탭하면 캔버스 중앙에 노드가 생성되고 즉시 텍스트 입력 모드로 전환된다. 노드를 탭하면 편집 모드로 진입하여 기존 내용을 수정할 수 있다. 노드를 드래그하면 자유롭게 이동할 수 있고, 그리드 스냅이 활성화되어 있으면 20px 단위로 정렬된다. 노드를 롱프레스하면 컨텍스트 메뉴가 나타나 배경색 변경(노란색, 하늘색, 민트 3가지 중 선택) 또는 삭제 옵션을 선택할 수 있다. 삭제 시 연결된 모든 엣지도 자동으로 삭제된다. 모바일 제스처. 핀치 제스처로 캔버스를 줌인/줌아웃할 수 있고, 줌 범위는 0.5x에서 3x로 제한된다. 투 핑거 드래그로 캔버스를 팬(이동)할 수 있다. 연결선 시스템. 연결 모드 버튼(🔗)을 탭한 후 출발 노드와 도착 노드를 순차적으로 탭하면 점선이 생성된다. 선은 rough.js로 렌더링하여 손그림 느낌을 유지하며, strokeWidth는 2px, strokeLineDash는 [5, 5]로 설정한다. 선을 탭하면 선택 상태가 되어 파란색으로 하이라이트되고, 롱프레스하면 삭제된다. @멘션 자동 연결. 텍스트 입력 중 @ 기호를 입력하면 기존 노드 목록이 바텀시트로 표시되고, 노드를 선택하면 현재 노드에서 선택한 노드로 점선이 자동 생성된다. 그리드 배경. 20px 간격의 연한 회색(#e5e5e5) 선으로 수평/수직 격자를 그리고, 설정에서 그리드 ON/OFF 및 스냅 기능 활성화 여부를 선택할 수 있다.

입출력 명세: 입력은 사용자 제스처(탭, 드래그, 롱프레스, 핀치, 팬)와 텍스트 입력이다. FAB 버튼 탭 시 새 노드 ID를 UUID로 생성하고 캔버스 중앙 좌표(현재 뷰포트 기준)에 노드를 추가한다. 노드 탭 시 해당 노드 ID를 전달받아 편집 모드로 전환한다. 드래그 시 delta x, y를 계산하여 노드 위치를 업데이트한다. 롱프레스 시 노드 ID를 전달받아 컨텍스트 메뉴를 표시한다. 연결 모드에서 두 노드 ID를 순차적으로 전달받아 새 엣지 ID를 UUID로 생성하고 fromId와 toId를 설정한다. @ 입력 시 현재 모든 노드의 content를 필터링하여 바텀시트에 표시하고, 선택 시 fromId를 현재 노드 ID, toId를 선택한 노드 ID로 설정하여 엣지를 생성한다. 핀치 제스처 시 스케일 값을 계산하여 캔버스 줌 레벨을 0.5에서 3 사이로 조정한다. 출력은 Zustand 상태에 저장된 노드와 엣지의 배열이며, SVG로 렌더링된 시각적 캔버스이다.

데이터 구조: 노드는 {id: UUID, position: {x: number, y: number}, content: string, type: 'circle', style: {backgroundColor: string, strokeColor: string, strokeWidth: number}, createdAt: timestamp, updatedAt: timestamp} 형태이다. 엣지는 {id: UUID, fromId: UUID, toId: UUID, lineStyle: 'dashed', createdAt: timestamp} 형태이다. Zustand 스토어는 {nodes: Node[], edges: Edge[], zoom: number, pan: {x: number, y: number}, gridEnabled: boolean, snapEnabled: boolean} 구조를 가진다. 액션은 createNode, updateNode, moveNode, deleteNode, createEdge, deleteEdge, setZoom, setPan, toggleGrid, toggleSnap 등이다.

기능적 제약사항: 이 단계에서는 동그라미 도형 1개만 지원한다. 다른 도형 타입(네모, 구름 등)은 Milestone 5에서 추가한다. 연결선은 점선 1개 스타일만 지원한다. 실선, 곡선, 화살표는 Milestone 5에서 추가한다. 색상은 3가지만 제공한다. 노란색(#FFE082), 하늘색(#90CAF9), 민트(#A5D6A7)이며, 나머지 5가지는 Milestone 5에서 추가한다. 백엔드 연동은 없다. 모든 데이터는 Zustand 로컬 상태에만 저장되며, 새로고침 시 손실된다. 실시간 협업은 없다. 다른 사용자의 변경사항은 보이지 않는다. Undo/Redo 기능은 Phase 2에서 구현한다. 검색 기능은 Milestone 4에서 추가한다.

기술적 제약: React 18 + TypeScript + Zustand를 사용한다. 상태 관리는 Zustand로 경량화하고, persist 미들웨어는 사용하지 않는다. 터치 제스처는 react-use-gesture(현재 @use-gesture/react로 이름 변경됨) 라이브러리를 사용한다. 스타일링은 Tailwind CSS를 사용한다. rough.js는 Milestone 1에서 이미 설치되어 있으므로 재사용한다. FAB 버튼은 Tailwind의 fixed, bottom-4, right-4로 배치한다. 컨텍스트 메뉴는 바텀시트 형태로 구현하되, 모바일에서는 position: fixed, bottom: 0으로, 데스크톱에서는 position: absolute로 조건부 렌더링한다. 그리드는 SVG line 요소를 반복하여 그린다. 200개의 line을 생성하므로 성능을 위해 useMemo로 메모이제이션한다.

의존성: Milestone 1의 프로토타입이 완료되어 있어야 한다. rough.js와 나눔손글씨 펜 폰트가 이미 설정되어 있고, 기본 Canvas 컴포넌트가 존재한다. Milestone 1의 정적 노드 1개를 Zustand 상태 관리로 전환해야 한다. Canvas 컴포넌트를 리팩토링하여 useCanvasStore에서 노드 배열을 가져와 map으로 렌더링하도록 변경한다.

완료 조건: 브라우저에서 FAB 버튼(+)이 우하단에 표시된다. FAB 버튼을 탭하면 캔버스 중앙에 노드가 생성되고 즉시 소프트 키보드가 올라온다. 텍스트를 입력하면 실시간으로 손글씨 폰트로 렌더링된다. 노드를 한 번 탭하면 편집 모드로 진입하여 기존 내용을 수정할 수 있다. 노드를 드래그하면 자유롭게 이동할 수 있고, 그리드 스냅이 활성화되어 있으면 20px 단위로 정렬된다. 노드를 롱프레스하면 바텀시트에 컨텍스트 메뉴가 나타나고, 배경색 변경(3가지 중 선택) 또는 삭제 옵션을 선택할 수 있다. 연결 모드 버튼(🔗)을 탭한 후 두 노드를 순차적으로 탭하면 점선이 생성된다. 선은 rough.js로 렌더링되어 손그림 느낌을 유지한다. @ 기호를 입력하면 바텀시트에 기존 노드 목록이 표시되고, 노드를 선택하면 자동으로 점선이 연결된다. 핀치 제스처로 캔버스를 줌인/줌아웃할 수 있고, 줌 범위는 0.5x에서 3x로 제한된다. 투 핑거 드래그로 캔버스를 팬할 수 있다. 그리드 배경이 20px 간격으로 표시되고, 설정에서 토글할 수 있다.

성공 지표: 사용자 10명에게 모바일 브라우저에서 5개 노드를 만들고 3개 이상 연결하는 테스트를 수행한다. 평균 완료 시간이 2분 이내이고, "직관적이다" 또는 "빠르다"는 피드백이 80% 이상이면 성공이다. 기술적으로는 노드 생성 속도가 100ms 이내, 드래그 성능이 60fps 유지, 제스처 응답성이 50ms 이내여야 한다. Chrome DevTools의 Performance 탭에서 Long Task가 발생하지 않아야 한다.
