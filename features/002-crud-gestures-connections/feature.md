# Milestone 2: 기본 CRUD, 모바일 제스처, 연결선

## 📋 마일스톤 개요

**기간**: Week 3-6 (4주)
**목표**: 노드 생성/편집/이동/삭제 + 그리드 배경 + 모바일 터치 제스처 + 점선 연결 + @멘션으로 기본 그래프 편집 환경을 완성합니다.

## 💡 비즈니스 가치

### 왜 이 기능이 필요한가?

Milestone 1의 프로토타입에서 UI/UX 방향성을 검증했다면, 이제 **실제로 사용 가능한 노트 작성 기능**을 구현해야 합니다. 사용자가 생각을 정리하려면 노드를 자유롭게 추가하고, 내용을 편집하고, 노드 간의 관계를 연결선으로 표현할 수 있어야 합니다.

### 모바일 퍼스트 전략

Knotly는 모바일 환경을 1순위로 최적화합니다. 출퇴근 중이나 회의 중에 즉석 메모를 남기는 사용 패턴을 지원하기 위해, 한 손으로 쉽게 조작할 수 있는 FAB 버튼, 핀치 제스처, 롱프레스 메뉴를 제공합니다.

### @멘션의 핵심 가치

텍스트 입력 중 @ 기호만 입력하면 기존 노드 목록이 나타나고, 선택만 하면 자동으로 연결선이 생성됩니다. 이는 **빠른 연결**을 통해 사고의 흐름을 끊지 않고 아이디어를 이어나갈 수 있게 합니다.

## 📖 사용자 스토리

### Story 1: 빠른 노드 생성
```
As a 모바일 사용자
I want to FAB 버튼을 탭하여 즉시 노드를 생성하고
So that 출퇴근 중에도 빠르게 메모할 수 있다
```

**수용 기준**:
- 우하단 FAB 버튼(+)을 탭하면 캔버스 중앙에 노드가 생성된다
- 즉시 소프트 키보드가 올라오고 텍스트 입력 모드로 전환된다
- 입력한 텍스트가 실시간으로 손글씨 폰트로 렌더링된다

### Story 2: 노드 편집과 이동
```
As a 사용자
I want to 노드를 탭하여 내용을 수정하고, 드래그하여 위치를 변경하고
So that 노트를 자유롭게 정리할 수 있다
```

**수용 기준**:
- 노드를 한 번 탭하면 텍스트 편집 모드로 진입한다
- 노드를 드래그하면 자유롭게 이동할 수 있다
- 그리드 스냅이 활성화되어 있으면 20px 단위로 정렬된다

### Story 3: 노드 삭제
```
As a 사용자
I want to 노드를 롱프레스하여 삭제 메뉴를 열고
So that 불필요한 노드를 쉽게 제거할 수 있다
```

**수용 기준**:
- 노드를 롱프레스하면 컨텍스트 메뉴가 나타난다
- "삭제" 옵션을 선택하면 노드와 연결된 모든 엣지가 삭제된다
- 삭제는 즉시 적용되며 Undo 기능은 Phase 2에서 제공된다

### Story 4: 점선 연결
```
As a 사용자
I want to 연결 모드 버튼을 탭한 후 두 노드를 순차적으로 탭하여
So that 노드 간의 관계를 시각적으로 표현할 수 있다
```

**수용 기준**:
- 연결 모드 버튼(🔗)을 탭하면 모드가 활성화된다
- 출발 노드를 탭한 후 도착 노드를 탭하면 점선이 생성된다
- 연결선은 rough.js로 렌더링되어 손그림 느낌을 유지한다

### Story 5: @멘션 자동 연결
```
As a 사용자
I want to 텍스트 입력 중 @ 기호를 입력하면 기존 노드 목록이 나타나고
So that 빠르게 노드를 연결할 수 있다
```

**수용 기준**:
- @ 입력 시 바텀시트에 기존 노드 목록이 표시된다
- 노드를 선택하면 현재 노드에서 선택한 노드로 점선이 자동 생성된다
- 바텀시트는 ESC 키 또는 외부 탭으로 닫을 수 있다

### Story 6: 모바일 제스처
```
As a 모바일 사용자
I want to 핀치 제스처로 캔버스를 줌하고, 투 핑거 드래그로 팬하고
So that 큰 마인드맵을 자유롭게 탐색할 수 있다
```

**수용 기준**:
- 핀치 제스처로 캔버스를 줌인/줌아웃할 수 있다
- 투 핑거 드래그로 캔버스를 이동할 수 있다
- 줌 범위는 0.5x ~ 3x로 제한된다

## ✅ 성공 지표

### 완료 조건
- [ ] FAB 버튼으로 노드를 생성할 수 있다
- [ ] 노드를 탭하여 편집하고, 드래그하여 이동할 수 있다
- [ ] 롱프레스로 컨텍스트 메뉴를 열고 삭제할 수 있다
- [ ] 연결 모드에서 두 노드를 순차 탭하여 점선을 생성할 수 있다
- [ ] @ 입력 시 노드 목록이 나타나고 선택 시 자동 연결된다
- [ ] 그리드 배경이 표시되고 토글할 수 있다
- [ ] 핀치/팬 제스처가 모바일에서 정상 작동한다

### 데모 시나리오
1. 모바일 브라우저에서 접속
2. FAB 버튼(+)을 탭하여 첫 노드 생성
3. "프로젝트 아이디어" 입력 후 확인
4. FAB 버튼을 다시 탭하여 두 번째 노드 생성
5. "마케팅 전략" 입력 중 "@프로" 입력
6. 자동완성에서 "프로젝트 아이디어" 선택
7. 두 노드가 점선으로 자동 연결됨
8. 핀치 제스처로 줌아웃하여 전체 보기
9. 투 핑거 드래그로 캔버스 이동
10. 노드를 롱프레스하여 배경색 변경

## 🎨 UI/UX 요구사항

### 레이아웃
- **FAB 버튼**: 우하단 고정, 44px 원형, 엄지손가락 도달 범위 내
- **그리드**: 20px 간격, 연한 회색(#e5e5e5), 토글 가능
- **컨텍스트 메뉴**: 바텀시트 형태, 3가지 옵션 (배경색 변경, 삭제, 취소)

### 시각적 디자인
- **노드**: 동그라미 1개 (이 단계에서는 다른 도형 없음)
- **색상 팔레트**: 노란색(#FFE082), 하늘색(#90CAF9), 민트(#A5D6A7) 3가지
- **연결선**: 점선만 (strokeLineDash: [5, 5]), strokeWidth 2px

### 인터랙션
- **터치 타겟**: 최소 44px 크기 유지
- **제스처 우선순위**: 핀치 > 팬 > 노드 드래그
- **피드백**: 노드 선택 시 파란 테두리, 드래그 중 반투명

### 반응형
- **모바일 (375px)**: FAB 버튼 우하단, 컨텍스트 메뉴 바텀시트
- **태블릿 (768px)**: FAB 버튼 유지, 컨텍스트 메뉴 팝오버
- **데스크톱 (1440px)**: FAB 버튼 대신 도구 바, 우클릭 메뉴

## 🚫 제약사항

### 이 단계에서 제외되는 것
- ❌ 12가지 도형 (동그라미 1개만)
- ❌ 5가지 선 스타일 (점선 1개만)
- ❌ 8가지 색상 (3가지만)
- ❌ 백엔드 저장 (로컬 상태만)
- ❌ 실시간 협업
- ❌ 검색 기능
- ❌ Undo/Redo

### 기술적 제약
- 로컬 상태만 사용 (Zustand)
- 백엔드 없음 (데이터 휘발성)
- 새로고침 시 모든 노드 손실

## 📊 KPI

### 정량적 지표
- **노드 생성 속도**: FAB 클릭부터 입력 가능까지 < 100ms
- **드래그 성능**: 60fps 유지
- **제스처 응답성**: 터치부터 시각적 피드백까지 < 50ms

### 정성적 지표
- 사용자 10명에게 모바일에서 5개 노드를 만들고 연결하는 테스트
- 평균 완료 시간 < 2분
- "직관적이다", "빠르다"는 피드백 80% 이상
